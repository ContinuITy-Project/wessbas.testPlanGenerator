<?xml version="1.0" encoding="ASCII"?>
<m4jdsl:WorkloadModel xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:m4jdsl="http://m4jdsl/1.0" xsi:schemaLocation="http://m4jdsl/1.0 ../../../net.sf.markov4jmeter.m4jdsl/model/m4jdsl.ecore">
  <workloadIntensity xsi:type="m4jdsl:ConstantWorkloadIntensity" formula="1"/>
  <applicationModel>
    <sessionLayerEFSM initialState="//@applicationModel/@sessionLayerEFSM/@states.0" exitState="//@applicationModel/@sessionLayerEFSM/@states.1">
      <states eId="loginState">
        <service name="login"/>
        <protocolDetails initialState="loginState" exitState="welcomeState">
          <states eId="loginState">
            <request xsi:type="m4jdsl:HTTPRequest" eId="login.shtml">
              <assertions patternToTest="login"/>
            </request>
            <outgoingTransitions targetState="welcomeState"/>
          </states>
          <states eId="welcomeState">
            <request xsi:type="m4jdsl:HTTPRequest" eId="welcome.shtml">
              <assertions patternToTest="welcome"/>
            </request>
          </states>
        </protocolDetails>
        <outgoingTransitions targetState="//@applicationModel/@sessionLayerEFSM/@states.1" action="" guard="isSignedIn = true"/>
        <outgoingTransitions targetState="//@applicationModel/@sessionLayerEFSM/@states.0" guard="isSignedIn = false"/>
      </states>
      <states eId="logoutState">
        <service name="logout"/>
        <protocolDetails initialState="logoutState" exitState="goodbyeState">
          <states eId="logoutState">
            <request xsi:type="m4jdsl:HTTPRequest" eId="logout.shtml">
              <assertions patternToTest="logout"/>
              <assertions patternToTest="logout_flow"/>
              <properties key="HTTPSampler.path" value="default.xhtml"/>
              <properties key="HTTPSampler.port" value="8080"/>
              <properties key="HTTPSampler.domain" value="127.0.0.1"/>
              <parameters name="logout" value="true"/>
            </request>
            <outgoingTransitions guard="isSignedIn = true" targetState="goodbyeState"/>
          </states>
          <states eId="goodbyeState">
            <request xsi:type="m4jdsl:HTTPRequest" eId="goodbye.shtml">
              <properties key="HTTPSampler.path" value="port8082.xhtml"/>
              <properties key="HTTPSampler.port" value="8082"/>
              <properties key="HTTPSampler.domain" value="localhost"/>
            </request>
          </states>
        </protocolDetails>
      </states>
    </sessionLayerEFSM>
  </applicationModel>
  <behaviorMix>
    <relativeFrequencies behaviorModel="//@behaviorModels.0" value="1.0"/>
  </behaviorMix>
  <behaviorModels name="user behavior" filename="behaviormodel.csv">
    <markovStates service="//@applicationModel/@sessionLayerEFSM/@states.0/@service" eId="loginState">
      <outgoingTransitions targetState="//@behaviorModels.0/@markovStates.1" probability="0.5">
        <thinkTime xsi:type="m4jdsl:NormalDistribution" mean="2.0" deviation="1.0"/>
      </outgoingTransitions>
      <outgoingTransitions targetState="//@behaviorModels.0/@markovStates.0" probability="0.5">
        <thinkTime xsi:type="m4jdsl:NormalDistribution" mean="12.0" deviation="4.0"/>
      </outgoingTransitions>
    </markovStates>
    <markovStates service="//@applicationModel/@sessionLayerEFSM/@states.1/@service" eId="logoutState"/>
  </behaviorModels>
</m4jdsl:WorkloadModel>
